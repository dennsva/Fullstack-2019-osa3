(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,n,t){e.exports=t(37)},36:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var o=t(0),a=t.n(o),c=t(11),r=t.n(c),i=t(2),u=function(e){var n=e.filter,t=e.setFilter;return a.a.createElement("form",null,a.a.createElement("div",null,"rajaa n\xe4ytett\xe4vi\xe4:",a.a.createElement("input",{value:n,onChange:function(e){var n=e.target.value;t(n),console.log("Filter set to ".concat(n))}})))},l=t(3),s=t.n(l),m="/api/persons",f=function(){return s.a.get(m).then(function(e){return e.data})},d=function(e){return s.a.post(m,e).then(function(e){return e.data})},p=function(e,n){return s.a.put("".concat(m,"/").concat(e),n).then(function(e){return e.data})},g=function(e){return s.a.delete("".concat(m,"/").concat(e)).then(function(e){return e.data})},v=function(e){var n=e.persons,t=e.setPersons,c=e.notify,r=Object(o.useState)(""),u=Object(i.a)(r,2),l=u[0],s=u[1],m=Object(o.useState)(""),f=Object(i.a)(m,2),g=f[0],v=f[1];return a.a.createElement("div",null,a.a.createElement("h2",null,"Lis\xe4\xe4 uusi"),a.a.createElement("form",{onSubmit:function(e){e.preventDefault();var o={name:l,number:g};if(n.map(function(e){return e.name}).includes(l)){if(window.confirm("".concat(l," on jo luettelossa, korvataanko vanha numero uudella?"))){var a=n.filter(function(e){return e.name===l}).map(function(e){return e.id})[0];console.log("Updating person with id ".concat(a)),p(a,o).then(function(e){t(n.map(function(n){return n.id===a?e:n})),s(""),v(""),console.log("Changed number of ".concat(e.name," (id ").concat(e.id,") to ").concat(e.number)),c({message:"Henkil\xf6n ".concat(e.name," numero on nyt ").concat(e.number),type:"good"})}).catch(function(e){console.log('Cannot update, person "'.concat(o.name,'" does not exist')),c({message:"Henkil\xf6 ".concat(o.name," oli jo poistettu"),type:"bad"}),t(n.filter(function(e){return e.id!==a}))})}}else d(o).then(function(e){t(n.concat(e)),s(""),v(""),console.log("Created person ".concat(e.name," (id ").concat(e.id,")")),c({message:"Lis\xe4ttiin ".concat(e.name),type:"good"})})}},a.a.createElement("div",null,"nimi:",a.a.createElement("input",{value:l,onChange:function(e){s(e.target.value)}})),a.a.createElement("div",null,"numero:",a.a.createElement("input",{value:g,onChange:function(e){v(e.target.value)}})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"},"lis\xe4\xe4"))))},E=function(e){var n=e.persons,t=e.setPersons,o=e.filter,c=e.notify,r=n.filter(function(e){return e.name.toLowerCase().indexOf(o.toLowerCase())>=0});return console.log("Found ".concat(r.length," persons matching filter ").concat(o)),a.a.createElement("div",null,a.a.createElement("h2",null,"Numerot"),r.map(function(e){return a.a.createElement("p",{key:e.name},e.name," ",e.number,a.a.createElement("button",{onClick:function(){window.confirm("Poistetaanko ".concat(e.name,"?"))&&(g(e.id),t(n.filter(function(n){return n.id!==e.id})),console.log("".concat(e.name," removed")),c({message:"Poistettiin ".concat(e.name),type:"good"}))}},"poista"))}))},b=function(e){var n=e.notification;if(null===n)return null;console.log("Showing notification '".concat(n.message,"' of type '").concat(n.type,"'"));var t="good"===n.type?"green":"red";return a.a.createElement("div",{className:"error",style:{color:t}},n.message)},h=function(){var e=Object(o.useState)([]),n=Object(i.a)(e,2),t=n[0],c=n[1],r=Object(o.useState)(""),l=Object(i.a)(r,2),s=l[0],m=l[1],d=Object(o.useState)(null),p=Object(i.a)(d,2),g=p[0],h=p[1],y=function(e){h({message:e.message,type:e.type}),setTimeout(function(){h(null)},5e3)};return Object(o.useEffect)(function(){console.log("Updating persons..."),f().then(function(e){c(e),console.log("Loaded ".concat(e.length," persons"))})},[]),a.a.createElement("div",null,a.a.createElement("h1",null,"Puhelinluettelo"),a.a.createElement(b,{notification:g}),a.a.createElement(u,{filter:s,setFilter:m}),a.a.createElement(v,{persons:t,setPersons:c,notify:y}),a.a.createElement(E,{persons:t,setPersons:c,filter:s,notify:y}))};t(36);r.a.render(a.a.createElement(h,null),document.getElementById("root"))}},[[12,1,2]]]);
//# sourceMappingURL=main.56ac397c.chunk.js.map