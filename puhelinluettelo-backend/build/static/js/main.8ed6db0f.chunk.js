(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,n,t){e.exports=t(37)},36:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a=t(0),o=t.n(a),c=t(11),r=t.n(c),i=t(2),l=function(e){var n=e.filter,t=e.setFilter;return o.a.createElement("form",null,o.a.createElement("div",null,"rajaa n\xe4ytett\xe4vi\xe4:",o.a.createElement("input",{value:n,onChange:function(e){var n=e.target.value;t(n),console.log("Filter set to ".concat(n))}})))},u=t(3),s=t.n(u),m="/api/persons",f=function(){return s.a.get(m).then(function(e){return e.data})},d=function(e){return s.a.post(m,e).then(function(e){return e.data})},p=function(e,n){return s.a.put("".concat(m,"/").concat(e),n).then(function(e){return e.data})},g=function(e){return s.a.delete("".concat(m,"/").concat(e)).then(function(e){return e.data})},v=function(e){var n=e.persons,t=e.setPersons,c=e.notify,r=Object(a.useState)(""),l=Object(i.a)(r,2),u=l[0],s=l[1],m=Object(a.useState)(""),f=Object(i.a)(m,2),g=f[0],v=f[1];return o.a.createElement("div",null,o.a.createElement("h2",null,"Lis\xe4\xe4 uusi"),o.a.createElement("form",{onSubmit:function(e){e.preventDefault();var a={name:u,number:g};if(n.map(function(e){return e.name}).includes(u)){if(window.confirm("".concat(u," on jo luettelossa, korvataanko vanha numero uudella?"))){var o=n.filter(function(e){return e.name===u}).map(function(e){return e.id})[0];console.log("Updating person with id ".concat(o)),p(o,a).then(function(e){t(n.map(function(n){return n.id===o?e:n})),s(""),v(""),console.log("Changed number of ".concat(e.name," (id ").concat(e.id,") to ").concat(e.number)),c({message:"Henkil\xf6n ".concat(e.name," numero on nyt ").concat(e.number),type:"good"})}).catch(function(e){console.log('Cannot update, person "'.concat(a.name,'" does not exist')),c({message:"Henkil\xf6\xe4 ".concat(a.name," ei ole puhelinluettelossa"),type:"bad"}),t(n.filter(function(e){return e.id!==o}))})}}else d(a).then(function(e){t(n.concat(e)),s(""),v(""),console.log("Created person ".concat(e.name," (id ").concat(e.id,")")),c({message:"Lis\xe4ttiin ".concat(e.name),type:"good"})}).catch(function(e){console.log("Failed to add person ".concat(a.name," (id ").concat(a.id,"): ").concat(e.name)),c({message:e.name,type:"bad"})})}},o.a.createElement("div",null,"nimi:",o.a.createElement("input",{value:u,onChange:function(e){s(e.target.value)}})),o.a.createElement("div",null,"numero:",o.a.createElement("input",{value:g,onChange:function(e){v(e.target.value)}})),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"lis\xe4\xe4"))))},E=function(e){var n=e.persons,t=e.setPersons,a=e.filter,c=e.notify,r=n.filter(function(e){return e.name.toLowerCase().indexOf(a.toLowerCase())>=0});return console.log("Found ".concat(r.length," persons matching filter ").concat(a)),o.a.createElement("div",null,o.a.createElement("h2",null,"Numerot"),r.map(function(e){return o.a.createElement("p",{key:e.name},e.name," ",e.number,o.a.createElement("button",{onClick:function(){window.confirm("Poistetaanko ".concat(e.name,"?"))&&(g(e.id),t(n.filter(function(n){return n.id!==e.id})),console.log("".concat(e.name," removed")),c({message:"Poistettiin ".concat(e.name),type:"good"}))}},"poista"))}))},h=function(e){var n=e.notification;if(null===n)return null;console.log("Showing notification '".concat(n.message,"' of type '").concat(n.type,"'"));var t="good"===n.type?"green":"red";return o.a.createElement("div",{className:"error",style:{color:t}},n.message)},b=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],c=n[1],r=Object(a.useState)(""),u=Object(i.a)(r,2),s=u[0],m=u[1],d=Object(a.useState)(null),p=Object(i.a)(d,2),g=p[0],b=p[1],y=function(e){b({message:e.message,type:e.type}),setTimeout(function(){b(null)},5e3)};return Object(a.useEffect)(function(){console.log("Updating persons..."),f().then(function(e){c(e),console.log("Loaded ".concat(e.length," persons"))})},[]),o.a.createElement("div",null,o.a.createElement("h1",null,"Puhelinluettelo"),o.a.createElement(h,{notification:g}),o.a.createElement(l,{filter:s,setFilter:m}),o.a.createElement(v,{persons:t,setPersons:c,notify:y}),o.a.createElement(E,{persons:t,setPersons:c,filter:s,notify:y}))};t(36);r.a.render(o.a.createElement(b,null),document.getElementById("root"))}},[[12,1,2]]]);
//# sourceMappingURL=main.8ed6db0f.chunk.js.map